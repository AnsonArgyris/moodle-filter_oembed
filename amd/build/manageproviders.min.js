define(["jquery","core/notification","core/ajax","core/templates","core/fragment","filter_oembed/list"],function(a,b,c,d,e,f){return{listenEnableDisable:function(){a("#oembedproviders").on("click",".oembed-provider-actions .filter-oembed-visibility",function(e){e.preventDefault();var f=a(this).parents("tr")[0],g=a(f).data("pid"),h=!a(f).hasClass("dimmed_text"),i=h?"disable":"enable";c.call([{methodname:"filter_oembed_provider_manage_visibility",args:{pid:g,action:i},done:function(b){d.render("filter_oembed/managementpagerow",b.providermodel).done(function(b){a(f).replaceWith(b)})},fail:function(a){b.exception(a)}}],!0,!0)})},listenEdit:function(){a("#oembedproviders").on("click",".oembed-provider-actions .filter-oembed-edit",function(f){f.preventDefault();var g=a(this).parents("tr")[0],h=a(g).data("pid"),i=new RegExp("(?:course-)(\\S)"),j=i.exec(a("body").attr("class")),k=parseInt(j[1]);c.call([{methodname:"filter_oembed_provider_edit",args:{pid:h},done:function(b){var c={jsonformdata:JSON.stringify(b)};e.loadFragment("filter_oembed","provider",k,c).done(function(b,c){a("#oembed-display-providers_"+h).addClass("oembed-provider-editing"),d.replaceNodeContents(a("#oembed-display-providers_"+h+" .oembed-provider-details"),b,c)})},fail:function(a){b.exception(a)}}],!0,!0)})},init:function(){var a={valueNames:["list-providername"]};new f("providermanagement",a),this.listenEnableDisable(),this.listenEdit()}}});